"use strict";jQuery(document).ready(function(i){var m=directory_explorer;function u(a){a.hasClass("loading")?a.removeClass("loading"):a.addClass("loading")}i(".faculty-explorer-form button.btn-primary").on("click",function(a){i(this).parents(".faculty-explorer-form").first().find('input[name="paging"]').val("false")}),i(".faculty-explorer-form").submit(function(a){a.preventDefault();var e,t,n,d=i(this).parents(".faculty-explorer-shortcode").first(),p=i(this),l=(d.find(".results-header"),d.find(".result-count")),o=d.find(".person-list"),f=d.find(".directory-paging");u(d),e=d,t=p.find('input[name="first_name"]').val(),n=p.find('input[name="last_name"]').val(),a=p.find('select[name="department"] option:selected').html(),(void 0!==t&&""!==t||void 0!==n&&""!==n||void 0!==a&&""!==a)&&(s=i("<h4></h4>").attr("class","results-header").append(i("<span></span>").text(m.search_results_filters.filter_label)),void 0!==t&&""!==t&&s.append(i("<span></span>").text(m.search_results_filters.first_name+" ").append(i("<strong></strong>").append(i("<em></em>").text('"'+t+'"')))),void 0!==n&&""!==n&&s.append(i("<span></span>").text(m.search_results_filters.last_name+" ").append(i("<strong></strong>").append(i("<em></em>").text('"'+n+'"')))),void 0!==a&&""!==a&&s.append(i("<span></span>").text(m.search_results_filters.department+" ").append(i("<strong></strong>").append(i("<em></em>").text('"'+a+'"')))),e.find(".results-header").remove(),e.find(".results-wrap").prepend(s)),"false"==p.find('input[name="paging"]').val()&&(p.find('input[name="paged"]').val(1),f.find(".prev").addClass("disabled").find("a").data("paged",0).attr({"aria-hidden":"true",tabindex:-1}),f.find(".next").removeClass("disabled").find("a").data("paged",2).attr({"aria-hidden":"false",tabindex:0}));var s=p.find('select[name="department"]').val();""!=s?(s={action:"request_dept_contact_info",verification:m.verification,term_slug:s},i.post(m.ajaxurl,s,function(a){""==a||void 0===a?i(".dept-contact").html(a).addClass("empty"):i(".dept-contact").html(a).removeClass("empty")})):i(".dept-contact").html("").addClass("empty"),i.get(m.ajaxurl,p.serialize(),function(a){var e=JSON.parse(a),t="";""!=e.person_html.trim()&&(t=e.person_html);var n,s,i,r,n=(n=e.person_count,s=m.empty_result_message,i=m.single_result_message,r=m.multiple_result_message,(a=parseInt(n))<1?s:1===a?i:r.replace("%d",n));l.html(n);e=Math.ceil(parseInt(e.person_count)/parseInt(p.find('input[name="count"]').val()));f.find("nav").data("pages",e),e<=1&&f.find(".next").addClass("disabled").find("a").attr({"aria-hidden":"true",tabindex:-1}),o.html(t),u(d),"true"==p.find('input[name="paging"]').val()&&(o.hasClass("view-portrait")?o.find(".person-card").first().find("a").first().focus():o.hasClass("view-phonebook")&&o.find("table > tbody > tr").first().find(".name-title a").first().focus())})}),i(".directory-paging nav a").on("click",function(a){var e,t,n;a.preventDefault(),i(this).parent("span").hasClass("disabled")||(t=(e=i(this).parents(".faculty-explorer-shortcode").first()).offset().top-i(".mobile-menu-drawer").height(),i("body").hasClass("admin-bar")&&(t-=i("#wpadminbar").height()),i("html, body").animate({scrollTop:t},200),e.find('.faculty-explorer-form input[name="paging"]').val("true"),a=i(this).parents("nav").first().data("pages"),t=i(this).data("paged"),e.find('.faculty-explorer-form input[name="paged"]').val(t),i(this).parent("span").hasClass("next")?(i(this).parents(".directory-paging").first().find("a").each(function(){var a=i(this).data("paged")+1;i(this).data("paged",a)}),i(this).data("paged")>=a&&i(this).parent("span").addClass("disabled").find("a").attr({"aria-hidden":"true",tabindex:-1}),(n=i(this).parents("nav").first().find(".prev")).hasClass("disabled")&&n.removeClass("disabled").find("a").attr({"aria-hidden":"false",tabindex:0})):(i(this).parents(".directory-paging").first().find("a").each(function(){var a=i(this).data("paged")-1;i(this).data("paged",a)}),i(this).data("paged")<=0&&i(this).parent("span").addClass("disabled").find("a").attr({"aria-hidden":"true",tabindex:-1}),(n=i(this).parents("nav").first().find(".next")).hasClass("disabled")&&n.removeClass("disabled").find("a").attr({"aria-hidden":"false",tabindex:0})),e.find(".faculty-explorer-form").trigger("submit"))})});